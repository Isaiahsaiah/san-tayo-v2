import{a as q}from"./chunk-JZ7S4AVC.js";import{A as j,B as I,C as A,D as z,E as $,a as O,c as w,d as l,e as d,f as g,g as T,h as M,i as N,j as u,k as C,l as k,m as L,n as f,o as a,p as r,q as h,r as x,s as c,t as p,u as s,v as V,w as m,x as F}from"./chunk-PNUQRCQD.js";var b=class t{restaurant=M.required();origin=M.required();reset=T();onReset(){this.reset.emit()}getDirections(){let i=this.origin().latitude.toString(),e=this.origin().longitude.toString(),n=this.restaurant()?.lat?.toString(),o=this.restaurant()?.long?.toString(),_=`https://www.google.com/maps/dir/?api=1&origin=${i},${e}&destination=${n},${o}`;window.open(_,"_blank")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-result"]],inputs:{restaurant:[1,"restaurant"],origin:[1,"origin"]},outputs:{reset:"reset"},standalone:!0,features:[m],decls:8,vars:1,consts:[[1,"name","mx-4"],[1,"mt-4"],["type","button",1,"san-tayo-button","me-4",3,"click"],["type","button",1,"san-tayo-button",3,"click"]],template:function(e,n){if(e&1&&(a(0,"div")(1,"h2",0),s(2),r(),a(3,"div",1)(4,"button",2),c("click",function(){return n.onReset()}),s(5," Reset "),r(),a(6,"button",3),c("click",function(){return n.getDirections()}),s(7," Get directions "),r()()()),e&2){let o;u(2),V((o=n.restaurant())==null?null:o.name)}},styles:[".san-tayo-button[_ngcontent-%COMP%]{cursor:pointer;border:none;font-size:16px;font-weight:500;background-image:linear-gradient(90deg,#fcecfe,#fbf6e7,#e6fcf5);border-radius:11px;padding:12px 20px;line-height:24px;color:#14387e;box-shadow:0 1px 2px #00000005,0 4px 16px #00000005,0 4px 24px #00000005}.san-tayo-button[_ngcontent-%COMP%]:hover, .san-tayo-button[_ngcontent-%COMP%]:active{background-image:linear-gradient(90deg,#e3d4e5,#e2ddd0,#cfe3dd)}.name[_ngcontent-%COMP%]{color:#14387e;font-weight:700}"]})};var v=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-loading"]],standalone:!0,features:[m],decls:3,vars:0,consts:[[1,"mx-4"]],template:function(e,n){e&1&&(a(0,"div")(1,"p",0),s(2,"Searching for a surprise meal destination..."),r()())}})};var U="1.0.0";function B(t,i){if(t&1){let e=x();a(0,"div",2)(1,"div")(2,"button",5),c("click",function(){d(e);let o=p(2);return g(o.generateRandomRestaurant(o.restaurants))}),s(3," San tayo? "),r()(),a(4,"div")(5,"button",5),c("click",function(){d(e);let o=p(2);return g(o.generateRandomRestaurantNearMe())}),s(6," Surprise me! "),r()()()}}function J(t,i){if(t&1){let e=x();a(0,"img",6),c("click",function(){d(e);let o=p(2);return g(o.onReset())}),r()}if(t&2){let e,n=p(2);L("src",(e=n.randomRestaurant())==null?null:e.url,N)}}function K(t,i){if(t&1){let e=x();a(0,"app-result",7),c("reset",function(){d(e);let o=p(2);return g(o.onReset())}),r()}if(t&2){let e=p(2);L("restaurant",e.randomRestaurant())("origin",e.originLocation())}}function Q(t,i){if(t&1&&(a(0,"div"),k(1,B,7,0,"div",2)(2,J,1,1,"img",3)(3,K,1,2,"app-result",4),r()),t&2){let e,n,o=p();u(),f(o.randomRestaurant()?-1:1),u(),f(o.randomRestaurant()&&((e=o.randomRestaurant())!=null&&e.url)?2:-1),u(),f(o.randomRestaurant()&&!((n=o.randomRestaurant())!=null&&n.url)?3:-1)}}function W(t,i){t&1&&h(0,"app-loading")}var R=class t{router=w(z);restaurantService=w(q);restaurants=this.restaurantService.restaurants;version=U;randomRestaurant=C(null);isLoading=C(!1);originLocation=C({});generateRandomRestaurant(i){this.isLoading.set(!0);let e=this.generateRandomId(i),n=i.filter(o=>o.id===e);this.randomRestaurant.set(n[0]),this.isLoading.set(!1)}generateRandomRestaurantNearMe(){this.isLoading.set(!0),navigator.geolocation.getCurrentPosition(i=>{let e={latitude:i.coords.latitude,longitude:i.coords.longitude};this.originLocation.set(e),this.restaurantService.searchNearbyRestaurants(e.latitude,e.longitude).pipe(O(n=>n.places)).subscribe({next:n=>{let o=n,_=[],E=0;o.forEach(y=>{_.push({id:(E+1).toString(),name:y.displayName.text,url:"",lat:y.location.latitude,long:y.location.longitude}),E++}),this.generateRandomRestaurant(_)},error:n=>{console.log("Error occured in fetching nearby restaurants",n);let o=n.message;this.restaurantService.setLocErrMessage(o),this.router.navigate(["/error"])},complete:()=>{this.isLoading.set(!1)}})},i=>{let e=`Unable to get current location: ${i.message}`;this.restaurantService.setLocErrMessage(e),this.isLoading.set(!1),this.router.navigate(["/error"])})}generateRandomId(i){return Math.trunc(Math.random()*i.length+1).toString()}onReset(){this.randomRestaurant.set(null)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-search"]],standalone:!0,features:[m],decls:4,vars:1,consts:[[1,"full-page-container","d-flex"],[1,"center-container","text-center"],[1,"d-flex","flex-column","gap-48"],["alt","image-logo",1,"image-logo",3,"src"],[3,"restaurant","origin"],["type","button",1,"san-tayo-button",3,"click"],["alt","image-logo",1,"image-logo",3,"click","src"],[3,"reset","restaurant","origin"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1),k(2,Q,4,3,"div")(3,W,1,0,"app-loading"),r()()),e&2&&(u(2),f(n.isLoading()?3:2))},dependencies:[b,v],styles:[".full-page-container[_ngcontent-%COMP%]{width:100vw;height:100vh;background:radial-gradient(circle at 50% 0%,#fcc419 15%,#ff6b6b 75%)}.center-container[_ngcontent-%COMP%]{flex:1;align-self:center}.san-tayo-button[_ngcontent-%COMP%]{cursor:pointer;border:none;font-size:16px;font-weight:500;background-image:linear-gradient(90deg,#fcecfe,#fbf6e7,#e6fcf5);border-radius:11px;padding:12px 20px;line-height:24px;color:#14387e;box-shadow:0 1px 2px #00000005,0 4px 16px #00000005,0 4px 24px #00000005}.san-tayo-button[_ngcontent-%COMP%]:hover, .san-tayo-button[_ngcontent-%COMP%]:active{background-image:linear-gradient(90deg,#e3d4e5,#e2ddd0,#cfe3dd)}.image-logo[_ngcontent-%COMP%]{max-width:450px}.gap-48[_ngcontent-%COMP%]{gap:48px}.version-label[_ngcontent-%COMP%]{font-size:small}@media (max-width: 576px){.image-logo[_ngcontent-%COMP%]{max-width:350px}}@media (max-width: 476px){.image-logo[_ngcontent-%COMP%]{max-width:250px}}"]})};var G=[{path:"",component:R},{path:"error",loadComponent:()=>import("./chunk-NPTQ2SP3.js").then(t=>t.ErrorComponent)},{path:"**",loadComponent:()=>import("./chunk-4WCSM42J.js").then(t=>t.NotFoundComponent)}];var H={providers:[F({eventCoalescing:!0}),$(G),j()]};var S=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-root"]],standalone:!0,features:[m],decls:1,vars:0,template:function(e,n){e&1&&h(0,"router-outlet")},dependencies:[A]})};I(S,H).catch(t=>console.error(t));
